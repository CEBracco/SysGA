{% extends 'base.html.twig' %}

{% block body %}
    <h4>Trámites</h4>

    <table class="striped highlight">
        <thead>
            <tr>
                <th>Fecha</th>
                <th>Gastos Arancel</th>
                <th>Impuestos Patente</th>
                <th>Sellados</th>
                <th>Honorarios</th>
                <th>Estado</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
        {% for tramite in tramites %}
            <tr>
                <td>{% if tramite.fecha %}{{ tramite.fecha|date('d/m/Y') }}{% endif %}</td>
                <td>${{ tramite.gastoArancel }}</td>
                <td>${{ tramite.impuestosPatente }}</td>
                <td>${{ tramite.sellados }}</td>
                <td>${{ tramite.honorarios }}</td>
                <td class="fit">
                    <a id="status-{{ tramite.id }}" class='btn' href='#' onclick="openStatusModal({{ tramite.id }})">{{ tramite.estado }}</a>
                </td>
                <td class="fit">
                    <a href="{{ path('tramite_edit', { 'id': tramite.id }) }}" class="btn waves-effect waves-light no-lateral-padding"><i class="material-icons">mode_edit</i></a>
                    <a href="{{ path('tramite_delete', { 'id': tramite.id }) }}" class="btn waves-effect waves-light no-lateral-padding red"><i class="material-icons">delete</i></a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <!-- Dropdown Structure -->
    <!-- <ul id='estados' class='dropdown-content'>
      <li><a href="#!">Esperando</a></li>
      <li><a href="#!">En registro</a></li>
      <li><a href="#!">Con Observaciones</a></li>
      <li><a href="#!">Sellando</a></li>
      <li><a href="#!">Completado</a></li>
    </ul> -->

    <!-- Modal Trigger -->



    <div class="fixed-action-btn">
        <a href="{{ path('tramite_new') }}" class="btn-floating btn-large waves-effect waves-light teal darken-2">
            <i class="large material-icons">add</i>
        </a>
    </div>
{% endblock %}

{% block modals %}
<!-- Modal Structure -->
<div id="statusModal" class="modal modal-fixed-footer">
  <div class="modal-content">
      <h4>Estados</h4>
      <div id="estadosCollection" class="collection">
        <a href="#!" class="collection-item">Esperando</a>
        <a href="#!" class="collection-item">En registro</a>
        <a href="#!" class="collection-item">Con Observaciones</a>
        <a href="#!" class="collection-item">Sellando</a>
        <a href="#!" class="collection-item">Completado</a>
      </div>
  </div>
  <div class="modal-footer">
      <a href="#!" class="modal-action modal-close waves-effect btn" onclick="doUpdateStatus()">Aceptar</a>
      <a href="#!" class="modal-action modal-close waves-effect btn-flat">Cancelar</a>
  </div>
</div>
{% endblock %}

{% block javascripts %}
<script>
    $(document).ready(function() {
        $('.datepicker').pickadate({
            labelMonthNext: 'Mes Siguiente',
            labelMonthPrev: 'Mes Anterior',
            labelMonthSelect: 'Seleccione un mes',
            labelYearSelect: 'Seleccione un año',
            monthsFull: [ 'Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembrr', 'Octubre', 'Noviembre', 'Diciembre' ],
            monthsShort: [ 'Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic' ],
            weekdaysFull: [ 'Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado' ],
            weekdaysShort: [ 'Dom', 'Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb' ],
            weekdaysLetter: [ 'D', 'L', 'M', 'M', 'J', 'V', 'S' ],
            today: 'Hoy',
            clear: 'Limpiar',
            close: 'Cerrar',
            selectMonths: true,
            selectYears: 15,
            format: 'dd/mm/yyyy',
            onStart: function (){
                var date = new Date();
                this.set('select', [date.getFullYear(), date.getMonth() + 1, date.getDate()]);
            }
        });
        $('select').material_select();
    });

</script>
<script src="{{ asset('js/tramite/index.js') }}"></script>
{% endblock %}
